@import "tailwindcss";

@theme {
  /* Custom colors from old v3 config */
  --color-primary: #050816;
  --color-secondary: #aaa6c3;
  --color-tertiary: #151030;
  --color-white-50: #d9ecff;
  --color-white-100: #f3f3f3;
  --color-black-50: #1c1c21;
  --color-black-100: #0e0e10;
  --color-black-200: #282732;
  --color-blue-50: #839cb5;
  --color-blue-100: #2d2d38;

  /* Custom breakpoint */
  --breakpoint-xs: 450px;

  /* Custom box shadow */
  --shadow-card: 0px 35px 120px -15px #211e35;

  /* Background image */
  --background-image-hero-pattern: url("/assets/herobg.png");

  /* Gradient for card glow effect */
  --gradient: radial-gradient(circle, #e5e5e5 0%, #fff 100%);
}

@layer base {
  * {
    box-sizing: border-box;
    scroll-behavior: smooth;
    color-scheme: dark;
  }

  body {
    margin: 0;
    padding: 0;
    font-family: "Poppins", sans-serif;
    background: #171717;
    color: #ffffff;
    /* 性能优化：启用硬件加速 */
    /* removed transform: translateZ(0) to avoid creating a stacking context
       that breaks position:fixed for the navbar. Use will-change if needed. */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* 优化动画性能 */
  [data-motion] {
    will-change: transform, opacity;
  }

  /* 动画结束后移除 will-change */
  [data-motion-complete] {
    will-change: auto;
  }

  /* GSAP animated elements - GPU acceleration hints */
  .timeline-card,
  .expText,
  .tech-card {
    will-change: transform, opacity;
    backface-visibility: hidden;
  }
}

@layer components {
  .heading {
    @apply text-white font-bold text-4xl md:text-5xl text-center;
  }

  .headingWords {
    @apply text-[#915EFF];
  }

  .card-border {
    @apply border border-black-50 bg-black-100;
  }

  .card-bg {
    @apply bg-tertiary;
  }

  .tech-card-animated-bg {
    @apply absolute left-0 -bottom-full w-full h-full bg-[#2D3240] group-hover:bottom-0 transition-all duration-700;
  }

  .tech-card-content {
    @apply flex flex-col md:justify-center items-center overflow-hidden relative z-10 group-hover:cursor-grab;

    & p {
      @apply text-lg 2xl:text-2xl pb-5 font-semibold text-white-50 text-center;
    }
  }

  .tech-grid {
    @apply grid grid-cols-2 md:grid-cols-3 xl:grid-cols-6 gap-5 md:gap-8 2xl:gap-16 mt-16;
  }

  .tech-card {
    /* Initial hidden state for GSAP animation - will be animated to visible */
    opacity: 0;
    transform: translateY(50px);
  }

  .tech-icon-wrapper {
    @apply flex justify-center items-center w-40 sm:w-52 h-40 sm:h-60 relative;
  }

  /* Custom max width utility */
  .max-w-8xl {
    max-width: 1536px;
  }

  .max-w-9xl {
    max-width: 1920px;
  }
}

.black-gradient {
  background: #000000;
  /* fallback for old browsers */
  background: -webkit-linear-gradient(to right, #434343, #000000);
  /* Chrome 10-25, Safari 5.1-6 */
  background: linear-gradient(to right, #434343, #000000);
  /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
}

.violet-gradient {
  background: #804dee;
  background: linear-gradient(-90deg, #804dee 0%, rgba(60, 51, 80, 0) 100%);
  background: -webkit-linear-gradient(
    -90deg,
    #804dee 0%,
    rgba(60, 51, 80, 0) 100%
  );
}

/* Tailwind-style animation utility: bounceY */
@layer utilities {
  @keyframes bounceY {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(24px);
    }
  }

  .animate-bounceY {
    animation: bounceY 1.5s ease-in-out infinite;
  }

  @keyframes customFloat {
    0% {
      /* 使用 3d 变换强制开启 GPU 加速 */
      transform: translate3d(0, 0, 0) rotateY(0deg);
    }
    50% {
      /* 稍微加大一点幅度看效果 */
      transform: translate3d(0, -15px, 0) rotateY(5deg);
    }
    100% {
      transform: translate3d(0, 0, 0) rotateY(0deg);
    }
  }

  .hero-3d-container {
    display: block; /* 确保是块级元素 */
    perspective: 1000px;
    animation: customFloat 6s ease-in-out infinite;
    will-change: transform; /* 告诉浏览器这个元素会动 */
  }

  .animate-float {
    will-change: transform;
    /* 使用 ease-in-out 让上下浮动更自然 */
    animation: simpleFloat 4s ease-in-out infinite;
  }

  @keyframes simpleFloat {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-15px); /* 稍微加大浮动距离 */
    }
  }

  @keyframes gradient-flow {
    0% {
      background-position: 0% center;
    }
    100% {
      background-position: -200% center; /* 向左拉动两倍宽度 */
    }
  }

  .animate-gradient-flow {
    animation: gradient-flow 2.5s linear infinite;
    /* 保持 65% 主题色的秘诀：不要让亮色 via 太宽 */
    display: inline-block; /* 确保背景计算准确 */
  }
}

/* 针对 TechIcon 的容器优化 */
.tech-icon-wrapper canvas {
  /* 解决某些浏览器下 Canvas 默认背景不透明问题 */
  background: transparent !important;
}

/* canvas- styles */
.canvas-loader {
  font-size: 10px;
  width: 1em;
  height: 1em;
  border-radius: 50%;
  position: relative;
  text-indent: -9999em;
  animation: mulShdSpin 1.1s infinite ease;
  transform: translateZ(0);
}

@keyframes mulShdSpin {
  0%,
  100% {
    box-shadow:
      0em -2.6em 0em 0em #ffffff,
      1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2),
      2.5em 0em 0 0em rgba(255, 255, 255, 0.2),
      1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2),
      0em 2.5em 0 0em rgba(255, 255, 255, 0.2),
      -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2),
      -2.6em 0em 0 0em rgba(255, 255, 255, 0.5),
      -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.7);
  }

  12.5% {
    box-shadow:
      0em -2.6em 0em 0em rgba(255, 255, 255, 0.7),
      1.8em -1.8em 0 0em #ffffff,
      2.5em 0em 0 0em rgba(255, 255, 255, 0.2),
      1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2),
      0em 2.5em 0 0em rgba(255, 255, 255, 0.2),
      -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2),
      -2.6em 0em 0 0em rgba(255, 255, 255, 0.2),
      -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.5);
  }

  25% {
    box-shadow:
      0em -2.6em 0em 0em rgba(255, 255, 255, 0.5),
      1.8em -1.8em 0 0em rgba(255, 255, 255, 0.7),
      2.5em 0em 0 0em #ffffff,
      1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2),
      0em 2.5em 0 0em rgba(255, 255, 255, 0.2),
      -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2),
      -2.6em 0em 0 0em rgba(255, 255, 255, 0.2),
      -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }

  37.5% {
    box-shadow:
      0em -2.6em 0em 0em rgba(255, 255, 255, 0.2),
      1.8em -1.8em 0 0em rgba(255, 255, 255, 0.5),
      2.5em 0em 0 0em rgba(255, 255, 255, 0.7),
      1.75em 1.75em 0 0em #ffffff,
      0em 2.5em 0 0em rgba(255, 255, 255, 0.2),
      -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2),
      -2.6em 0em 0 0em rgba(255, 255, 255, 0.2),
      -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }

  50% {
    box-shadow:
      0em -2.6em 0em 0em rgba(255, 255, 255, 0.2),
      1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2),
      2.5em 0em 0 0em rgba(255, 255, 255, 0.5),
      1.75em 1.75em 0 0em rgba(255, 255, 255, 0.7),
      0em 2.5em 0 0em #ffffff,
      -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2),
      -2.6em 0em 0 0em rgba(255, 255, 255, 0.2),
      -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }

  62.5% {
    box-shadow:
      0em -2.6em 0em 0em rgba(255, 255, 255, 0.2),
      1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2),
      2.5em 0em 0 0em rgba(255, 255, 255, 0.2),
      1.75em 1.75em 0 0em rgba(255, 255, 255, 0.5),
      0em 2.5em 0 0em rgba(255, 255, 255, 0.7),
      -1.8em 1.8em 0 0em #ffffff,
      -2.6em 0em 0 0em rgba(255, 255, 255, 0.2),
      -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }

  75% {
    box-shadow:
      0em -2.6em 0em 0em rgba(255, 255, 255, 0.2),
      1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2),
      2.5em 0em 0 0em rgba(255, 255, 255, 0.2),
      1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2),
      0em 2.5em 0 0em rgba(255, 255, 255, 0.5),
      -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.7),
      -2.6em 0em 0 0em #ffffff,
      -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }

  87.5% {
    box-shadow:
      0em -2.6em 0em 0em rgba(255, 255, 255, 0.2),
      1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2),
      2.5em 0em 0 0em rgba(255, 255, 255, 0.2),
      1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2),
      0em 2.5em 0 0em rgba(255, 255, 255, 0.2),
      -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.5),
      -2.6em 0em 0 0em rgba(255, 255, 255, 0.7),
      -1.8em -1.8em 0 0em #ffffff;
  }
}
